<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US"
      lang="en-US">

<body>



<div class="box" id="portlet-global-language-selector" metal:define-macro="globalLanguageSelector">
         
    <h5>Languages</h5>  
      
    <div class="body">          
    <form tal:attributes="action string:${portal_url}/portal_languages/setPreferredLanguageCookie" method="post"
     tal:define="served_languages here/portal_languages/listSupportedLanguages;
                 langCookie python:request.cookies.get('languagePreference','');
                 master_language here/portal_languages/getDefaultLanguage"
                 tal:condition="served_languages|nothing"
                 > 
            <select name="lang" onchange="this.form.submit()" >
                <option tal:repeat="lang served_languages" tal:content="python:lang[1]" tal:attributes="value python:lang[0];selected python:langCookie == lang[0]"></option>
            </select>
            <p tal:content="langCookie"></p>
    </form>
    </div>
</div>
</body>
</html>
