<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"
      i18n:domain="plone">

<body>

<!-- LANGUAGE SWITCHER DEFINITION -->

<div metal:define-macro="language"
     tal:define="served_languages here/portal_languages/listSupportedLanguages;
                 boundLanguages here/portal_languages/getLanguageBindings;
                 prefLang python:boundLanguages[0];"
     tal:omit-tag="">

            <ul tal:condition="python:len(served_languages) >= 2">
                <li tal:repeat="lang served_languages"
                    tal:condition="here/portal_languages/showFlags">
    
                    <span tal:omit-tag="python:prefLang != lang[0]"
                            tal:define="code python:lang[0]">
    
                        <a href=""
                           tal:attributes="href string:${here/absolute_url}/switchLanguage?set_language=${code};
                                           title python:here.portal_languages.getNameForLanguageCode(lang[0]) or lang[1]">
    
                            <img width="15" 
                                 height="12" 
                                 alt=""
        						 tal:condition="here/portal_languages/showFlags | nothing"
                                 tal:attributes="src string:${portal_url}/flag-${code}.gif;
                                                 title python: lang[1];
                                                 class python: test(prefLang == lang[0], 'currentItem', None);" 
                                                 />
                        </a>
    
                    </span>    
                    
                </li>

                <li tal:condition="not: here/portal_languages/showFlags">
                    
                        <select style="font-size: 94%;"
                                onchange=""
                                tal:attributes="onchange string:window.location='${here/absolute_url}/switchLanguage?set_language=' + this.options(this.selectedIndex).value" >
                            <option tal:repeat="lang served_languages"
                                    tal:content="python:here.portal_languages.getNameForLanguageCode(lang[0]) or lang[1]"
                                    tal:attributes="selected python:prefLang == lang[0];
                                                    value python:lang[0]">Language</option>
                        </select>
    
                </li>





            </ul>

</div>

</body>
</html>
