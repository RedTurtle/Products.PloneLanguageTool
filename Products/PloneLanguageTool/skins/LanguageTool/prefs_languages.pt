<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="here/prefs_main_template/macros/master"
      i18n:domain="plone">

<metal:block metal:fill-slot="top_slot"
             tal:define="dummy python:request.set('disable_border',1)" />

<body>

<div metal:fill-slot="prefs_configlet_main">

    <form action="manage_setLanguageSettings" 
          tal:attributes="action python:here.absolute_url()+'/manage_setLanguageSettings'" 
          method="post">

        <h2>Default language</h2>
        <p>If content requested is not available in the language
           the user preferred, content will be presented in the fallback language.</p>
        <select name="defaultLanguage">
            <option value="en"
                    tal:repeat="lang here/portal_languages/listSupportedLanguages"
                    tal:attributes="value python:lang[0];
                                    selected python:lang[0]==here.portal_languages.getDefaultLanguage()"
                    tal:content="python: lang[1]">
                English
            </option>
        </select>

        <h2>Allowed languages</h2>
        <p>Select the languages that can be added in your portal. 
           <em>use the CTRL key to select / deselect single items</em>.
        </p>
        <select name="supportedLanguages:list" size="10" multiple>
            <option value="en"
                    tal:repeat="lang here/portal_languages/listAvailableLanguages"
                    tal:attributes="value python: lang[0];
                                    selected python:lang[0] in here.portal_languages.getSupportedLanguages()"
                    tal:content="python: lang[1]+'  ('+lang[0]+')'">
                English
            </option>
        </select>

        <p>
        <input type="checkbox" name="setUseCombinedLanguageCodes" value="1" tal:attributes="checked here/use_combined_language_codes| nothing" /> Allow combined language codes like de_DE or en_UK.
        </p>
        
        <p><input type="checkbox" name="displayFlags" value="1" tal:attributes="checked here/display_flags| nothing" /> Display flags for language selection. </p>
        		
        <h2>Negotiation Scheme</h2>
        <p>Check the language negotiation schemes that apply to this site</p>
        <ol>
        
            <li><p><input type="checkbox" name="setPathN" value="1" tal:attributes="checked here/use_path_negotiation| nothing" /> Use language codes in URL path for manual override.</p></li>
            <li><p><input type="checkbox" name="setCookieN" value="1" tal:attributes="checked here/use_cookie_negotiation| nothing" /> Use cookie for manual override.</p></li>
            <li><p><input type="checkbox" name="setRequestN" value="1" tal:attributes="checked here/use_request_negotiation | nothing" /> Use browser language request negotiation.</p></li>
            <li><p>Default fallback (always enabled). This is the language specified as default above.</p></li>
        </ol>   

        <h2>Content Control Settings</h2>
        <p>Check the settings which that apply to multilingual content</p>
        <ol>
            <li><p><input type="checkbox" name="setForcelanguageUrls" value="1" tal:attributes="checked here/force_language_urls| nothing" /> Force different urls for each language (redirect).</p></li>        
            <li><p><input type="checkbox" name="setAllowContentLanguageFallback" value="1" tal:attributes="checked here/allow_content_language_fallback| nothing" /> Allow content language fallback.</p></li>        
        </ol>
        
        <input type=submit i18n:attributes="value" value="Save">
    </form>

</div>

</body>
</html>
