<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="here/prefs_main_template/macros/master"
      i18n:domain="plonelanguagetool">

<metal:block metal:fill-slot="top_slot"
             tal:define="dummy python:request.set('disable_border',1)" />

<body>

<div metal:fill-slot="prefs_configlet_main">

    <h1>Language Settings</h1>
    
    <p class="documentDescription">
    Settings related to interface languages and content translations.
    </p>

    <form action="manage_setLanguageSettings" 
          tal:attributes="action python:here.absolute_url()+'/manage_setLanguageSettings'" 
          method="post">

        <fieldset>
            <legend i18n:translate="heading_default_language">Default language</legend>
            <p i18n:translate="description_default_language">
                If content requested is not available in the language the user
                requested, content will be presented in this default language.
            </p>

            <select name="defaultLanguage">
                <option value="en"
                        tal:repeat="lang here/portal_languages/listSupportedLanguages"
                        tal:attributes="value python:lang[0];
                                        selected python:lang[0]==here.portal_languages.getDefaultLanguage()"
                        tal:content="python: lang[1]">
                    English
                </option>
            </select>
        </fieldset>
        
        <fieldset>
            <legend i18n:translate="heading_allowed_languages">Allowed languages</legend>

            <p i18n:translate="description_allowed_languages">
                Select the languages that can be added in your portal.
            </p>
            <p class="discreet" i18n:translate="text_select_languages">
                Use the Ctrl or Apple key to select / deselect single items.
            </p>

            <select name="supportedLanguages:list" size="10" multiple="multiple">
                <option value="en"
                        tal:repeat="lang here/portal_languages/listAvailableLanguages"
                        tal:attributes="value python: lang[0];
                                        selected python:lang[0] in here.portal_languages.getSupportedLanguages()"
                        tal:content="python: lang[1]+'  ('+lang[0]+')'">
                    English
                </option>
            </select>

            <p>
                <input type="checkbox"
                       id="CombinedLangCodes"
                       class="noborder"
                       name="setUseCombinedLanguageCodes"
                       value="1"
                       tal:attributes="checked here/use_combined_language_codes| nothing" />
                <label for="CombinedLangCodes"
                       i18n:translate="label_allow_combined_language_codes">
                    Allow combined language codes like de-de or en-uk.
                </label>
            </p>
        
            <p>
                <input type="checkbox"
                       id="DisplayFlags"
                       class="noborder"
                       name="displayFlags"
                       value="1"
                       tal:attributes="checked here/display_flags| nothing" />
                <label for="DisplayFlags"
                       i18n:translate="label_display_flags">
                    Display flags for language selection (May be politically
                    sensitive in some areas).
                </label>
            </p>
        </fieldset>

        <fieldset>
            <legend i18n:translate="heading_negotiation_scheme">Negotiation Scheme</legend>
            <p i18n:translate="description_negotiation_scheme">
                Check the language negotiation schemes that apply to this site.
            </p>

            <ol>
                <li>
                    <input type="checkbox" 
                           id="LanguageCodes"
                           class="noborder"
                           name="setPathN" 
                           value="1" 
                           tal:attributes="checked here/use_path_negotiation| nothing" />
                    <label for="LanguageCodes" 
                           i18n:translate="label_language_codes_in_url">
                        Use language codes in URL path for manual override.
                    </label>
                </li>
                <li>
                    <input type="checkbox" 
                           id="CookieOverride"
                           class="noborder"
                           name="setCookieN" 
                           value="1" 
                           tal:attributes="checked here/use_cookie_negotiation| nothing" /> 
                    <label for="CookieOverride" 
                           i18n:translate="label_cookies_for_override">
                        Use cookie for manual override.
                    </label>
                </li>
                <li>
                    <input type="checkbox" 
                           id="RequestNegotiation"
                           class="noborder"
                           name="setRequestN" 
                           value="1" 
                           tal:attributes="checked here/use_request_negotiation | nothing" /> 
                    <label for="RequestNegotiation"
                           i18n:translate="label_browser_language_negotiation">
                        Use browser language request negotiation.
                    </label>
                </li>
                <li i18n:translate="text_default_fallback">
                    Default fallback (always enabled). This is the language
                    specified as default above.
                </li>
            </ol>
        </fieldset>   

        <fieldset>
            <legend i18n:translate="heading_content_settings">Content Control Settings</legend>
            <p i18n:translate="decription_content_settings">
                Check the settings that apply to multilingual content.
            </p>

            <ol>
                <li>
                    <input type="checkbox" 
                           id="ForceLanguageURLs"
                           class="noborder"
                           name="setForcelanguageUrls" 
                           value="1"
                           tal:attributes="checked here/force_language_urls| nothing" /> 
                    <label for="ForceLanguageURLs" 
                           i18n:translate="label_force_different_urls">
                        Force different urls for each language (redirect).
                    </label>
                </li>
                <li>
                    <input type="checkbox" 
                           id="AllowContentFallback"
                           class="noborder"
                           name="setAllowContentLanguageFallback" 
                           value="1" 
                           tal:attributes="checked here/allow_content_language_fallback| nothing" /> 
                    <label for="AllowContentFallback" 
                           i18n:translate="label_allow_content_language_fallback">
                        Allow content language fallback if the implementation supports it.
                    </label>
                </li>        
            </ol>
        </fieldset>
        
        <input type="submit" class="context" i18n:attributes="value label_save;" i18n:domain="plone" value="Save" />
    </form>

</div>

</body>
</html>
