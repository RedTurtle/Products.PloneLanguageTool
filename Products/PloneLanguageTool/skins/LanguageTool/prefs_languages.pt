<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="here/prefs_main_template/macros/master"
      i18n:domain="plonelanguagetool">

<metal:block metal:fill-slot="top_slot"
             tal:define="dummy python:request.set('disable_border',1)" />

<body>

<div metal:fill-slot="prefs_configlet_main">

    <form action="manage_setLanguageSettings" 
          tal:attributes="action python:here.absolute_url()+'/manage_setLanguageSettings'" 
          method="post">

        <h2 i18n:translate="heading_default_language">Default language</h2>
        <p i18n:translate="description_default_language">
            If content requested is not available in the language the user
            preferred, content will be presented in the fallback language.
        </p>

        <p>
        <select name="defaultLanguage">
            <option value="en"
                    tal:repeat="lang here/portal_languages/listSupportedLanguages"
                    tal:attributes="value python:lang[0];
                                    selected python:lang[0]==here.portal_languages.getDefaultLanguage()"
                    tal:content="python: lang[1]">
                English
            </option>
        </select>
        </p>
        
        <h2 i18n:translate="heading_allowed_languages">Allowed languages</h2>
        <p i18n:translate="description_allowed_languages">
            Select the languages that can be added in your portal.
        </p>

        <tal:dummydata define="languages python:{
                        'en': {'native':'English',    'english':'English',   'flag':'flag-gb.png', 'code':'en'},
                        'no': {'native':'Norsk',      'english':'Norwegian', 'flag':'flag-no.png', 'code':'no'},
                        'ja': {'native':'日本語',        'english':'Japanese',  'flag':'flag-jp.png', 'code':'ja'},
                        'zh': {'native':'简体中文',       'english':'Chinese',   'flag':'flag-cn.png', 'code':'zh'},
                        'de': {'native':'Deutsch',    'english':'German',    'flag':'flag-de.png', 'code':'de'},
                        'fi': {'native':'Suomi',      'english':'Finnish',   'flag':'flag-fi.png', 'code':'fi'},
                        'da': {'native':'Dansk',      'english':'Danish',    'flag':'flag-dk.png', 'code':'da'},
                        'sv': {'native':'Svenska',    'english':'Swedish',   'flag':'flag-se.png', 'code':'sv'},
                        'is': {'native':'Islenska',   'english':'Icelandic', 'flag':'flag-is.png', 'code':'is'},
                        'nl': {'native':'Nederlands', 'english':'Dutch',     'flag':'flag-nl.png', 'code':'nl'},
                        'es': {'native':'Español',    'english':'Spanish',   'flag':'flag-es.png', 'code':'es'},
                        'fr': {'native':'Français',   'english':'French',    'flag':'flag-fr.png', 'code':'fr'},
                        'it': {'native':'Italiano',   'english':'Italian',   'flag':'flag-it.png', 'code':'it'},
                        'gr': {'native':'Ελληνικά',   'english':'Greek',     'flag':'flag-gr.png', 'code':'gr'},
                        'pl': {'native':'Polski',     'english':'Polish',    'flag':'flag-pl.png', 'code':'pl'},
                         }">

            <table class="listing"
                   id="lang-selection"
                   style="display: block; height: 15em; width: 36em; overflow: auto;">
                <thead>
                    <tr>
                        <th class="nosort">Allowed?</th>
                        <th>Language</th>
                        <th>Language (English)</th>
                        <th>Code</th>
                    </tr>
                </thead>
    
                <tbody>
                    <tal:language repeat="lang python:languages.values()">
                    <tr tal:define="oddrow repeat/lang/odd"
                        tal:attributes="class python:test(oddrow, 'even', 'odd')">
                        <td style="text-align: center;"><input type="checkbox" class="noborder" /></td>
                        <td>
                            <img src="" alt="" height="16" width="16"
                                 tal:condition="here/portal_languages/showFlags"
                                 tal:attributes="src string:${portal_url}/${lang/flag}" />
                            <span tal:replace="lang/native">Norsk</span>
                        </td>
                        <td>
                            <img src="" alt="" height="16" width="16"
                                 tal:condition="here/portal_languages/showFlags"
                                 tal:attributes="src string:${portal_url}/${lang/flag}" />
                            <span tal:replace="lang/english">Norwegian</span>
                        </td>
                        <td tal:content="lang/code">no</td>
                    </tr>
                    </tal:language>
                </tbody>
            </table>


        </tal:dummydata>
<!--
        <select name="supportedLanguages:list" size="10" multiple="multiple">
            <option value="en"
                    tal:repeat="lang here/portal_languages/listAvailableLanguages"
                    tal:attributes="value python: lang[0];
                                    selected python:lang[0] in here.portal_languages.getSupportedLanguages()"
                    tal:content="python: lang[1]+'  ('+lang[0]+')'">
                English
            </option>
        </select>
-->
        <p>
            <input type="checkbox"
                   class="noborder"
                   name="setUseCombinedLanguageCodes"
                   value="1"
                   tal:attributes="checked here/use_combined_language_codes| nothing" />
            <span i18n:translate="label_allow_combined_language_codes">
                Allow combined language codes like de-de or en-uk.
            </span>
        </p>
        
        <p>
            <input type="checkbox"
                   class="noborder"
                   name="displayFlags"
                   value="1"
                   tal:attributes="checked here/display_flags| nothing" />
            <span i18n:translate="label_display_flags">
                Display flags for language selection (May be politically
                sensitive in some areas).
            </span>
        </p>

        <h2 i18n:translate="heading_negotiation_scheme">Negotiation Scheme</h2>
        <p i18n:translate="description_negotiation_scheme">
            Check the language negotiation schemes that apply to this site.
        </p>

        <ol>
            <li>
                <input type="checkbox" 
                       class="noborder"
                       name="setPathN" 
                       value="1" 
                       tal:attributes="checked here/use_path_negotiation| nothing" />
                <span i18n:translate="label_language_codes_in_url">
                    Use language codes in URL path for manual override.
                </span>
            </li>
            <li>
                <input type="checkbox" 
                       class="noborder"
                       name="setCookieN" 
                       value="1" 
                       tal:attributes="checked here/use_cookie_negotiation| nothing" /> 
                <span i18n:translate="label_cookies_for_override">
                    Use cookie for manual override.
                </span>
            </li>
            <li>
                <input type="checkbox" 
                       class="noborder"
                       name="setRequestN" 
                       value="1" 
                       tal:attributes="checked here/use_request_negotiation | nothing" /> 
                <span i18n:translate="label_browser_language_negotiation">
                    Use browser language request negotiation.
                </span>
            </li>
            <li i18n:translate="text_default_fallback">
                Default fallback (always enabled). This is the language
                specified as default above.
            </li>
        </ol>   

        <h2 i18n:translate="heading_content_settings">Content Control Settings</h2>
        <p i18n:translate="decription_content_settings">
            Check the settings that apply to multilingual content.
        </p>

        <ol>
            <li>
                <input type="checkbox" 
                       class="noborder"
                       name="setForcelanguageUrls" 
                       value="1" 
                       tal:attributes="checked here/force_language_urls| nothing" /> 
                <span i18n:translate="label_force_different_urls">
                    Force different urls for each language (redirect).
                </span>
            </li>
            <li>
                <input type="checkbox" 
                       class="noborder"
                       name="setAllowContentLanguageFallback" 
                       value="1" 
                       tal:attributes="checked here/allow_content_language_fallback| nothing" /> 
                <span i18n:translate="label_allow_content_language_fallback">
                    Allow content language fallback if the implementation supports it.
                </span>
            </li>        
        </ol>
        
        <input type="submit" class="context" i18n:attributes="value label_save;" i18n:domain="plone" value="Save" />
    </form>

</div>

</body>
</html>
