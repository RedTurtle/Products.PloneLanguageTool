<html xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      i18n:domain="plone">

<body>

<!-- The languages box -->

<div metal:define-macro="portlet"
     tal:define="PTS modules/Products/PlacelessTranslationService | nothing;
                 portal here/portal_url/getPortalObject"
     tal:condition="PTS">

    <div class="portlet" tal:define="plone_langs python:PTS.getLanguages('plone');
                                 current_lang python:PTS.negotiate(plone_langs, request)" id="portlet-language">

        <h5 i18n:translate="label_language">Language</h5>

        <div class="portletBody">

            <label for="language" >
            <div class="hiddenLabel" i18n:translate="label_choose_language">Choose your language</div>
	    <select name="language" id="language" onChange="document.cookie='user_language=' + this.options[this.selectedIndex].value + ';path=/'; window.location.reload()"
                    style="width: 175px" alt="Choose your Language" title="Choose your language" i18n:attributes="title">

                <tal:block tal:repeat="lang plone_langs">
                    <option value=""
                       tal:attributes="value lang;
                                       selected
		      python:test(lang==current_lang, 'selected', None)"
                       tal:content="python:PTS.getLanguageName(lang) or lang">English</option>
                </tal:block>

            </select></label>

        </div>

    </div>

</div>

</body>

</html>
